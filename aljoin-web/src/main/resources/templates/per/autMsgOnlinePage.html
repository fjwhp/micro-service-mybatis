<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>在线通知</title>
<link rel="stylesheet" href="/getCssStyle?css=static/web/plugins/layui/css/layui.css" media="all" />
<link rel="stylesheet" href="../../web/css/global.css" media="all">
<link rel="stylesheet" href="../../web/css/zTreeStyle.css" media="all">
<link rel="stylesheet" href="../../web/plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="../../web/css/table.css" />
<link rel="stylesheet" href="/getCssStyle?css=static/web/plugins/layui2/css/layui.css" />
<link rel="stylesheet" href="../../web/css/public.css" media="all">
<link rel="stylesheet" href="../../web/css/zhengls.css" media="all">
<link rel="stylesheet" href="../../web/css/multsel.css" media="all">
<style>
/* 下拉框样式 */
.blue_border{border:solid 1px #339bf1;}	
</style>
</head>
<body> 
	<input type="hidden" name="${_csrf.parameterName}" id="${_csrf.parameterName}" value="${_csrf.token}" />
	<div class="admin-main content_sel">
		<blockquote class="layui-elem-quote" style="padding:5px;">
			<form class="layui-form" action="">
				<div class="r">
					<div class="layui-input-inline m_r10">
						<span>通知类型</span>
					</div>
					<div class="layui-input-inline m_r20">
			      		<select  id="city1"   name="city1" lay-verify="required" style="width:150px;height:32px;">
			      			<option value=""></option>
					        <option value="online_msg_mail_100">邮件</option>
				        	<option value="online_msg_meeting_100">会议</option>
					        <option value="online_msg_workplan_100">工作计划</option>
				       		<option value="online_msg_togetherwork_100">协同办公</option>
			      		</select>
		   			</div>
		   			<div class="layui-input-inline m_r10">
						<span>状态</span>
					</div>
					<div class="layui-input-inline m_r20">
			      		<select id="city2" name="city2" lay-verify="required" style="width:150px;height:32px;">
					        <option value=""></option>
					        <option value="1">已读</option>
					        <option value="0">未读</option>
			      		</select>
				   	</div>
					<div class="layui-input-inline">
						<input type="text" name="searchKey" id="searchKey" maxlength="20" placeholder="请输入创建人或标题" autocomplete="off" class="layui-input"
							style="height: 30px; line-height: 30px;">
					</div>
					<span><@a code="150602" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="loadData()" iclass="layui-icon"
						 icon="&#xe615;" text="查询"/></span>
				</div>
			    <div class="layui-input-inline">
					<span ><@a code="150601" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="deleteIds()" iclass="layui-icon"
						 icon="&#xe640;" text="删除"/></span>				  	
				</div> 
			</form>
		</blockquote>
		<div class="layui-form">
			<table class="layui-table admin-table">
	       	<!-- 	<colgroup>
					<col width="5%">
					<col width="8%">								
					<col width="10%">
					<col width="43%">
					<col width="10%">
					<col width="15%">
					<col width="10%">
					<col>
				</colgroup> -->
				<thead>
					<tr>
						<th style="width: 20px;"><input type="checkbox" lay-skin="primary" id="paging_check-all" lay-filter="paging_check-all" ></th>
						<th style="display: none;">用户ID</th>
						<th style="width: 60px;">序号</th>
						<th style="width: 100px;">通知类型</th>
						<th>标题</th>
						<th style="width: 40px;">状态</th>
						<th style="width: 160px;">时间</th>
						<th style="width: 100px;">创建人</th>
					</tr>
				</thead>
		<tbody id="paging-data">
		<script id="paging-script" type="text/html">
		{{each records value index}}
			<tr> 
				<td><input type="checkbox"   class="check-id  moreInput"  lay-skin="primary"   id="{{value.id}}"></td>
				<td style="display: none;">{{value.id}}</td>

			{{if value.isRead==1}}
                <td style="color:#b5b5b5">{{(current-1)*size+index+1}}</td>
				<td style="color:#b5b5b5" title="{{if value.msgType=='online_msg_mail_100'}}邮件{{/if}} 
					{{if value.msgType=='online_msg_meeting_100'}}会议{{/if}}
					{{if value.msgType=='online_msg_workplan_100'}}工作计划{{/if}}
					{{if value.msgType=='online_msg_togetherwork_100'}}协同办公{{/if}}">
					{{if value.msgType=='online_msg_mail_100'}}邮件{{/if}} 
					{{if value.msgType=='online_msg_meeting_100'}}会议{{/if}}
					{{if value.msgType=='online_msg_workplan_100'}}工作计划{{/if}}
					{{if value.msgType=='online_msg_togetherwork_100'}}协同办公{{/if}}
				</td>
				<td	class="hand table_link" onclick="showView('/'+'{{value.goUrl}}','{{value.id}}')" title="{{value.msgContent}}">{{value.msgContent}}</td>
				<td style="color:#b5b5b5">{{if value.isRead==1}}已读{{/if}}{{if value.isRead==0}}未读{{/if}}</td>
				<td style="color:#b5b5b5">{{value.createTime}}</td>
				<td style="color:#b5b5b5">{{value.fromUserFullName}}</td>
			{{/if}}

			{{if value.isRead==0}}
                <td style="color:black">{{(current-1)*size+index+1}}</td>
				<td style="color:black" title="{{if value.msgType=='online_msg_mail_100'}}邮件{{/if}} 
					{{if value.msgType=='online_msg_meeting_100'}}会议{{/if}}
					{{if value.msgType=='online_msg_workplan_100'}}工作计划{{/if}}
					{{if value.msgType=='online_msg_togetherwork_100'}}协同办公{{/if}}">
					{{if value.msgType=='online_msg_mail_100'}}邮件{{/if}} 
					{{if value.msgType=='online_msg_meeting_100'}}会议{{/if}}
					{{if value.msgType=='online_msg_workplan_100'}}工作计划{{/if}}
					{{if value.msgType=='online_msg_togetherwork_100'}}协同办公{{/if}}
				</td>
				<td	class="hand table_link" onclick="showView('/'+'{{value.goUrl}}','{{value.id}}')" title="{{value.msgContent}}">{{value.msgContent}}</td>
				<td style="color:black">{{if value.isRead==1}}已读{{/if}}{{if value.isRead==0}}未读{{/if}}</td>
				<td style="color:black">{{value.createTime}}</td>
				<td style="color:black">{{value.fromUserFullName}}</td>
			{{/if}}
			</tr>
		{{/each}}
		</script>
		</tbody>
		</table>
		</div>
		<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
			<div id="paging-footer" class="page" style="background-color: white; text-align: center;"></div>
		</div>
	</div>
	<input type="hidden" id="bizId" value="">
	<input type="hidden" id="processInstanceId" value="">
	<input type="hidden" id="isEnd" value="">
	<input type="hidden" id="isShowReadUserName" value="">
	<!--收文阅件：收文登记  -->
	<div class="admin-main" style="display: none;z-index: 19940200;padding-bottom:60px;" id="win-register-object">
		<form class="layui-form layui-form-pane" id="register-object-form">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<input type="hidden" name="id" id="id-register" value="" />
			<input type="hidden" name="isDefaultClaim" value="1">
			<!-- 来文标题  -->
			<div class="" style="text-align: center;">
				 <span id="fileTitle-register" style="font-size:16px;font-weight: bold;word-wrap:break-word"></span>
			</div>
			
  			<!-- 文件类型 -->
			<div class="p_t10">
				<span class="e6ed">文件类型：</span>
				<span id="fileTypeName-register"></span>
			</div>
   			
   			<!-- 来文单位 -->
			<div class="p_t10">
				<span class="e6ed">来文单位：</span>
				<span id="fromUnitName-register"></span>
			</div>
			
			<!-- 来文文号 -->
			<div class="p_t10">
				<span class="e6ed">来文文号：</span>
				<span id="fromFileCode-register"></span>
			</div>
			
			<!-- 收文编号 -->
			<div class="p_t10">
				<span class="e6ed">收文编号：</span>
				<span id="receiveFileCode-register"></span>
			</div>
			
			<!-- 原文日期 -->
			<div class="p_t10">
				<span class="e6ed">原文日期：</span>
				<span id="orgnlFileTime-register"></span>
			</div>
			
			<!-- 收文日期 -->
			<div class="p_t10">
				<span class="e6ed">收文日期：</span>
				<span id="receiveFileTime-register"></span>
			</div>
			
			<!-- 办理时限 -->
			<div class="p_t10">
				<span class="e6ed">办理时限：</span>
				<span id="handleLimitTime-register"></span>
			</div>
			
   			<!-- 缓急 -->
			<div class="p_t10">
				<span class="e6ed">缓急：</span>
				<span id="urgentLevelName-register"></span>
			</div>
   			<!-- 附件 -->
				<div class="p_t10 cl" >
				<span class="e6ed l">已传附件：</span>
				<div >
					<table class="layui-table" style="width: 50%;margin-top: 0px;border: none;">
				      <colgroup>
						    <col width="60%">
						    <col width="20%">
						    <col width="20%">
						  </colgroup>
				      <tbody id="demoList-register">
							<script   id="artt-register"  type="text/html">
                    			 {{each filelist value index}}
                                    	<tr>
                   					   		<td style="border:none;color:#339bf1;">{{value.attachName}}</td>
                   					   		<td style="border:none;color:#339bf1;">{{value.attachSize}}kb</td>
                    						<td style="border:none;">
						                        <a onclick="downLoads('{{value.attachPath}}','{{value.attachName}}')" style="color:#339bf1;cursor:pointer">下载</a>
											</td>
                                    	</tr>
	              				 {{/each}}
                  			</script>
						</tbody>
			    	</table> 
				</div>
			</div>
				
			<div class="btn_fixed" id="btns">
			    <div class="l">
			        <a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll()"><i class="fa fa-backward "></i> 返回</a>
			    </div> 
				<div class="r">
					<a class="layui-btn btns" lay-submit="" lay-filter="form-regsub-submit" id="check-sub"><i class="fa fa-save"></i> 提交</a>
					<a class="layui-btn" onclick="readReceipt.print()"><i class="layui-icon">&#xe621;</i>打印</a>
					<a class="layui-btn" onclick="daily()"><i class="layui-icon">&#xe60a;</i>流转日志</a>
					<a class="layui-btn" onclick="readReceipt.showImg()"><i class="layui-icon">&#xe62c;</i>流程图</a>
				</div>
			</div>
		</form>
	</div>
	<div class="" id="win-daily-object" style="display:none;">
		<form class="layui-form layui-form-pane admin-main">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<div class="layui-form">
				  <table class="layui-table admin-table">
				  	  <colgroup>
					      <col width="10%">
					      <col width="20%">
					      <col width="10%">
					      <col width="15%">
					      <col width="45%">
					      <col>
					  </colgroup>
					<thead>
						<tr>
							<th style="display: none;">用户ID</th>
							<th>操作人</th>
							<th>流程方向</th>
							<th>接收人</th>
							<th>操作时间</th>
							<th>审核意见</th>
						</tr>
					</thead>
					<tbody id="paging3-data">
					<script id="paging3-script" type="text/html">
						{{each loglist value index}}
						<tr >
							<td style="display: none;">{{value.taskId}}</td>
							<td>{{value.operationName}}</td>
							<td>{{value.direction}}</td>
							<td>{{value.recevieUserName}}</td>
							<td>{{value.operationTime}}</td>
							<td>{{value.comment}} </td>
						</tr>
						{{/each}}
					</script>
					</tbody>
					</table>
			  </div>
			  <div class="admin-table-page" style="border-width: 0px; z-index: 0;">
					<div id="paging3-footer" class="page" style="background-color: white; text-align: center;"></div>
			  </div>
		</form>
	</div>
	<!-- 提交 -->
		<!-- 审批填写意见----提交弹窗 -->
	<div class="m_10" id="win-submit-object" style="display:none;">
		<form class="layui-form layui-form-pane" id="">
			<div class="judge_div">
				<div class="l" style="width:58%;">
					<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
					<div class="layui-form-item">
						<label class="layui-form-label">审批选择</label>
						<div class="layui-input-block">
							<a class="layui-btn layui-btn-primary blue_border yes judge_btn" onclick="agree()" style="margin-left:20px;">同意</a>
							<a class="layui-btn layui-btn-primary no judge_btn" onclick="noagree()" id="no_agree_btn">回退</a>
						</div>
					</div>
					<div class="agree">
						<div class="layui-form-item">
							<label class="l" style="margin-left:14px;">下一级审批环节：</label>
							<!-- <label style="margin-left:14px;">审批</label> -->
							<div class="layui-input-inline" style="z-index:2001;">
							   <select name="nextNode" lay-verify="" id="nextNode">
							    </select>
							</div>
						</div>
						<div class="layui-form-item">
							<!-- option1 -->
							<div id="audit-orgn">
								<label class="l">下一级审批处理人：</label>
								<div class="l" style="width:73%"> 
									<div id="n_receiverName" class="judge input_btn reset1" style="max-height: 120px;overflow: auto;"></div>
									<a class="btn_blue2 r m_t10" onclick="personlSeclect()">请选择</a>
									<input type="hidden" name="receiverId"  id="n_receiverNameid" class="reset">
		                            <input type="hidden"   id="n_receiverName_" class="reset">
									<input type="hidden" id="deptId" class="reset">
									<input type="hidden" id="deptUserId" class="reset">
								</div>
							</div>
							
							<!-- option2 -->
							<div class="m_t10" id="audit-member">
								<div class="multsel l" defval="0">
									<span class="view">下一级审批处理人：</span>
									<div class="selist" id="audit-member-list">
									</div>
								</div>
								<div id="testarea" class="judge1 input_btn reset1 l" readonly="readonly"></div>
							</div>
						</div>
					</div>
					<div class="noagree" style="display:none">
						<div class="layui-form-item">
							<label class="l" style="margin-left:27px;">回退到上一级：</label>
							<!-- <label style="margin-left:14px;">审批</label> -->
							<div class="layui-input-inline" style="z-index:2001;">
							   <!--<select name="city" lay-verify="">
		
							    </select>-->
								<span id="pre-nodeName"></span>
							</div>
						</div>
					</div>
		
						<label style="font-weight:bold;">意见：</label>
						<textarea id="draw_sug" style="height:100px;width:97%;margin-top:5px;" onkeyup="countnum(this);" maxlength="95"></textarea>
						<div class="r hand" onclick="add_sug()"><span class="table_btn"><small  style="color:#333;margin-right:20px;"><span id="count">0</span>/95</small>加入常用意见</span></div>
				</div>
				<div class="layui-form l judge_table" style="width:40%;">
					  <table class="layui-table admin-table">
					  	  <colgroup>
						      <col width="30%">
						      <col width="70%">
						      <col>
						  </colgroup>
						<thead>
							<tr>
								<th>序号</th>
								<th>常用意见</th>
							</tr>
						</thead>
						<tbody id="opinion-data">
						  <script id="opinion-script" type="text/html">
							  {{each opinionlist value index}}
							  <tr >
								  <td>{{index+1}}</td>
								  <td title="" class="hand" onclick="click_font(this)"><p class="hand sug" style="white-space: normal;">{{value.content}}</p></td>
							  </tr>
							  {{/each}}
						  </script>
						  </tbody>
						</table>
				  </div>
			</div>
			<div class="cl judge_fixed" style="margin:10px 0;">
				<a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();" style="margin-right:10px;"><i class="fa fa-backward"></i> 返回</a>
				<div style="float: right;margin-right:15px;">
					<button class="layui-btn" lay-submit="" lay-filter="form-add-submit" id="form-add-submit">
						<i class="fa fa-save"></i> 确认
					</button>
				</div>
				<div style="float: right;margin-right:15px;">
					<button class="layui-btn" lay-submit="" lay-filter="form-jump-submit" style="display: none" id="form-jump-submit">
						<i class="fa fa-save"></i> 确认
					</button>
				</div>
		    </div>
		</form>
	</div>
	<!-- 池主任审批 -->
	<div class="admin-main" style="display: none;z-index: 19940200;padding-bottom:60px;" id="win-director-object">
		<form class="layui-form" id="director-object-form">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<input type="hidden" name="id" id="receiveFileId-director" value="" />
			<input type="hidden" name="processInstanceId" id="processInstanceId-director" value="">
			<!-- 来文标题  -->
			<div class="" style="text-align: center;">
				 <span id="fileTitle-director" style="font-size:16px;font-weight: bold;word-wrap:break-word"></span>
			</div>
			
  			<!-- 文件类型 -->
			<div class="p_t10">
				<span class="e6ed">文件类型：</span>
				<span id="fileTypeName-director"></span>
			</div>
   			
   			<!-- 来文单位 -->
			<div class="p_t10">
				<span class="e6ed">来文单位：</span>
				<span id="fromUnitName-director"></span>
			</div>
			
			<!-- 来文文号 -->
			<div class="p_t10">
				<span class="e6ed">来文文号：</span>
				<span id="fromFileCode-director"></span>
			</div>
			
			<!-- 收文编号 -->
			<div class="p_t10">
				<span class="e6ed">收文编号：</span>
				<span id="receiveFileCode-director"></span>
			</div>
			
			<!-- 原文日期 -->
			<div class="p_t10">
				<span class="e6ed">原文日期：</span>
				<span id="orgnlFileTime-director"></span>
			</div>
			
			<!-- 收文日期 -->
			<div class="p_t10">
				<span class="e6ed">收文日期：</span>
				<span id="receiveFileTime-director"></span>
			</div>
			
			<!-- 办理时限 -->
			<div class="p_t10">
				<span class="e6ed">办理时限：</span>
				<span id="handleLimitTime-director"></span>
			</div>
			
   			<!-- 缓急 -->
			<div class="p_t10">
				<span class="e6ed">缓急：</span>
				<span id="urgentLevelName-director"></span>
			</div>
			
			<!-- 办公室拟办意见 -->
			<div class="p_t10">
				<label class="layui-form-label" style="padding: 3px 0px;color: #8a8888;">办公室拟办意见：</label>
				<div class="layui-input-block">
					 <textarea  id="officeOpinion-director" name="officeOpinion" class="layui-textarea" style="margin-left:-20px;"></textarea>
				</div>
			</div>

			<!-- 传阅对象 -->
			<div class="p_t10">
				<!-- <span class="e6ed">传阅对象：</span> -->
				<div>
					<table class="layui-table" style="width: 100%;margin-top: 10px;border: none;">
				      <colgroup>
						    <col width="20%">
						    <col width="70%">
						    <col width="10%">
					  </colgroup>
					  <thead>
						  <tr>
							   <th>名称</th>
							   <th>传阅对象</th>
							   <th>操作</th>
						  </tr>
					  </thead>
				      <tbody id="objList">
							<script id="obj-script"  type="text/html">
                    			 {{each objlist value index}}
                                    	<tr>
                   					   		<td>{{value.text}}</td>
                   					   		<td>
												<div style="height:80px;overflow:auto;font-size:14px;padding: 10px 10px;white-space: normal;" id="readUserNames{{index}}" class="test reset1">{{value.readUserNames}}

												</div>
												<input type="hidden" value="">
												<input type="hidden" value="" id="orgn-full-name{{index}}">
												<input type="hidden" id="readUserIds{{index}}" value="{{value.readUserIds}}" class="reset">
												<input type="hidden" id="dictCode{{index}}" value="{{value.dictCode}}">
												<input type="hidden" id="dictName{{index}}" value="{{value.dictName}}">
												<input type="hidden" id="dictValue{{index}}" value="{{value.dictValue}}">
											</td>
                    						<td>
												<a class="btn_blue2 r m_t10" style="padding: 4px 24px;" onclick="personlSeclectOpen('{{index}}',this,'readUserIds{{index}}','readUserNames{{index}}')">人员选择</a>
											</td>
                                    	</tr>
	              				 {{/each}}
                  			</script>
						</tbody>

						<tr>
							<td class="dict-text"></td>
							<td>
								<div style="height:80px;overflow:auto;font-size:14px;padding: 10px 10px;white-space: normal;" id="readAllUserNames" class="test reset1">
									<input type="checkbox" lay-skin="primary"  id="all"/>
									<span style="top: 4px;left: 15px;position: relative;" class="dict-text">全局人员</span>
									<input type="hidden" id="dictCode" value="">
									<input type="hidden" id="dictName" value="">
									<input type="hidden" id="dictValue" value="">
									<input type="hidden" name="isCheckAllUser" id="isCheckAllUser" value="">
								</div>
							</td>
							<td>

							</td>
						</tr>
			    	</table> 
				</div>
			</div>
				<!-- 附件 -->
				<div class="p_t10 cl" >
				<span class="e6ed l">已传附件：</span>
				<div >
					<table class="layui-table" style="width: 50%;margin-top: 0px;border: none;">
				      <colgroup>
						    <col width="60%">
						    <col width="20%">
						    <col width="20%">
						  </colgroup>
				      <tbody id="demoList-director">
							<script   id="artt-director"  type="text/html">
                    			 {{each filelist value index}}
                                    	<tr>
                   					   		<td style="border:none;">{{value.attachName}}</td>
                   					   		<td style="border:none;">{{value.attachSize}}kb</td>
                    						<td style="border:none;">
						                        <a onclick="downLoads('{{value.attachPath}}','{{value.attachName}}')" style="color:#339bf1;cursor:pointer">下载</a>
											</td>
                                    	</tr>
	              				 {{/each}}
                  			</script>
						</tbody>
			    	</table> 
				</div>
			</div>
			<!-- 传阅对象 -->
			<div id="readObjDiv">

			</div>
			<div class="btn_fixed" id="btns">
			    <div class="l">
			        <a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll()"><i class="fa fa-backward "></i> 返回</a>
			    </div> 
				<div class="r">
					<a class="layui-btn btns" lay-submit="" lay-filter="form-director-sub" ><i class="fa fa-save"></i> 提交</a>
					<a class="layui-btn btns" lay-submit="" lay-filter="form-director-save"><i class="fa fa-save"></i> 保存</a>
					<a class="layui-btn" onclick="readReceipt.print()"><i class="layui-icon">&#xe621;</i>打印</a>
					<a class="layui-btn" onclick="daily()"><i class="layui-icon">&#xe60a;</i>流转日志</a>
					<a class="layui-btn" onclick="readReceipt.showImg()"><i class="layui-icon">&#xe62c;</i>流程图</a>
				</div>
			</div>
		</form>
	</div>
	<!-- 人员选择树 -->
	<div style="display: none;z-index: 19940200;margin-bottom:20px;" id="win-personal-object">
		<input id="peopelSel" class="tree_search1 reset" type="text" value="" placeholder="搜索">
		<a class="layui-btn layui-btn-small"  onclick="searchNodes()"><i class="layui-icon">&#xe615;</i>搜索</a>
		<a class="layui-btn layui-btn-small layui-btn-primary" style="margin-left:2px;" type="reset" onclick="reset_tree(treeDemo)"><li class="fa fa-eraser"></li> 重置</a>
		<ul id="treeDemo" class="ztree treeDemo1" name="treeDemo" style="display:block"></ul>
	</div>
	<!-- 一级人员弹窗 -->
	<div class="admin-main" style="display: none;z-index: 19940200;padding-bottom:60px;" id="win-human-object">
	<div class="layui-form">
		<!-- <input  class="tree_search1 reset" type="text" value="" placeholder="搜索" style="margin-left:0px;width: 69%;">
		<a class="layui-btn layui-btn-small" ><i class="layui-icon">&#xe615;</i>搜索</a> -->
		<table class="layui-table admin-table">
			<colgroup>
				<col width="20%">
				<col width="80%">
				<col>
			</colgroup>
			<thead>
				<tr>
					<th style="width: 20px;"><input type="checkbox" lay-skin="primary" lay-filter="human-check-all" id="human-checkall"></th>
					<th>用户</th>
				</tr>
			</thead>
			<tbody id="paging5-data">
				<script id="paging5-script" type="text/html">
					{{each memberlist value index}}
						<tr>
							<td>
								<input type="checkbox" class="human"  lay-skin="primary" lay-filter="human-checksign" uId="{{value.dictKey}}" uName="{{value.dictValue}}">
							</td>
							<td>{{value.dictValue}}</td>
						</tr>
					{{/each}}
				</script>
			</tbody>
	 	</table>

		<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
			<div id="paging5-footer" class="page" style="background-color: white; text-align: center;"></div>
		</div>
	</div>
	</div>
	<!-- 传阅待阅文件详情 -->
	<div class="admin-main" style="display: none;z-index: 19940200;padding-bottom:60px;" id="win-toreaddetail-object">
		<form class="layui-form" id="toRead-object-form">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<input type="hidden" name="id" id="id-toread" value="" />
			<input type="hidden" name="receiveFileId" id="receiveFileId-toread" value="" />
			<!-- 来文标题  -->
			<div class="" style="text-align: center;">
				 <span id="fileTitle-toread" style="font-size:16px;font-weight: bold;word-wrap:break-word"></span>
			</div>
			
  			<!-- 文件类型 -->
			<div class="p_t10">
				<span class="e6ed">文件类型：</span>
				<span id="fileTypeName-toread"></span>
			</div>
   			
   			<!-- 来文单位 -->
			<div class="p_t10">
				<span class="e6ed">来文单位：</span>
				<span id="fromUnitName-toread"></span>
			</div>
			
			<!-- 来文文号 -->
			<div class="p_t10">
				<span class="e6ed">来文文号：</span>
				<span id="fromFileCode-toread"></span>
			</div>
			
			<!-- 收文编号 -->
			<div class="p_t10">
				<span class="e6ed">收文编号：</span>
				<span id="receiveFileCode-toread"></span>
			</div>
			
			<!-- 原文日期 -->
			<div class="p_t10">
				<span class="e6ed">原文日期：</span>
				<span id="orgnlFileTime-toread"></span>
			</div>
			
			<!-- 收文日期 -->
			<div class="p_t10">
				<span class="e6ed">收文日期：</span>
				<span id="receiveFileTime-toread"></span>
			</div>
			
			<!-- 办理时限 -->
			<div class="p_t10">
				<span class="e6ed">办理时限：</span>
				<span id="handleLimitTime-toread"></span>
			</div>
			
   			<!-- 缓急 -->
			<div class="p_t10">
				<span class="e6ed">缓急：</span>
				<span id="urgentLevelName-toread"></span>
			</div>

			<!-- 办公室拟办意见 -->
			<div class="p_t10">
				<label class="layui-form-label" style="padding: 3px 0px;color:#8a8888;">办公室拟办意见：</label>
				<div class="layui-input-block">
					<span id="officeOpinion-toread" name="officeOpinion" style="position: absolute;top: 25px;left: -25px;"></span>
				</div>
			</div>

			<!-- 传阅对象 -->
			<!-- <div class="p_t10 cl">
				<span class="e6ed">传阅对象：</span>
			</div> -->
			<div class="p_t10">
				<!-- <span class="e6ed">传阅对象：</span> -->
				<div>
					<table class="layui-table" style="width: 100%;margin-top: 10px;border: none;">
						<colgroup>
							<col width="20%">
							<col width="80%">
							<!-- <col width="10%"> -->
						</colgroup>
						<thead>
						<tr>
							<th>名称</th>
							<th>传阅对象</th>
							
						</tr>
						</thead>
						<tbody id="objList-toread">
						<script id="obj-script-toread"  type="text/html">
							{{each objlist value index}}
							<tr>
								<td>{{value.text}}</td>
								<td>
									<div style="height:80px;overflow:auto;font-size:14px;padding: 10px 10px;" id="readUserNames-toread{{index}}">{{value.readUserNames}}</div>
									<input type="hidden" id="readUserIds{{index}}-toread" value="{{value.readUserIds}}">
									<input type="hidden" id="dictCode{{index}}" value="{{value.dictCode}}">
									<input type="hidden" id="dictName{{index}}" value="{{value.dictName}}">
									<input type="hidden" id="dictValue{{index}}-toread" value="{{value.dictValue}}">
								</td>
							</tr>
							{{/each}}
						</script>
						</tbody>
						<tr>
							<td class="dict-text"></td>
							<td>
								<div style="height:80px;overflow:auto;font-size:14px;padding: 10px 10px;white-space: normal;" class="test reset1">
									<input type="checkbox" lay-skin="primary"  id="all-detail"/>
									<span style="top: 4px;left: 15px;position: relative;" class="dict-text">全局人员</span>
								</div>
							</td>
						</tr>
					</table>
				</div>
			</div>

   			<!-- 附件 -->
				<div class="p_t10 cl" >
				<span class="e6ed l">已传附件：</span>
				<div >
					<table class="layui-table" style="width: 50%;margin-top: 0px;border: none;">
				      <colgroup>
						    <col width="60%">
						    <col width="20%">
						    <col width="20%">
						  </colgroup>
				      <tbody id="demoList-toread">
							<script   id="artt-toread"  type="text/html">
                    			 {{each filelist value index}}
                                    	<tr>
                   					   		<td style="border:none;">{{value.attachName}}</td>
                   					   		<td style="border:none;">{{value.attachSize}}kb</td>
                    						<td style="border:none;">
						                        <a onclick="downLoads('{{value.attachPath}}','{{value.attachName}}')" style="color:#339bf1;cursor:pointer">下载</a>
											</td>
                                    	</tr>
	              				 {{/each}}
                  			</script>
						</tbody>
			    	</table> 
				</div>
			</div>
				
			<div class="btn_fixed" id="btns">
			    <div class="l">
			        <a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll()"><i class="fa fa-backward "></i> 返回</a>
			    </div> 
				<div class="r">
					<a class="layui-btn btns" lay-submit="" lay-filter="form-toread-submit"><i class="fa fa-save"></i> 提交</a>
					<a class="layui-btn" onclick="readReceipt.print()"><i class="layui-icon">&#xe621;</i>打印</a>
					<a class="layui-btn btns"  onclick="batchidea()"><i class="layui-icon">&#xe640;</i>传阅情况及意见</a>
					<a class="layui-btn" onclick="daily()"><i class="layui-icon">&#xe60a;</i>流转日志</a>
					<a class="layui-btn" onclick="readReceipt.showImg()"><i class="layui-icon">&#xe62c;</i>流程图</a>
				</div>
			</div>
		</form>
	</div>
	<!-- 传阅情况及意见 -->
	<div class="admin-main" style="display: none;z-index: 19940200;padding-bottom:60px;" id="win-batchidea-object">
		<!-- 已阅人员 -->
		<div class="p_t10">
			<span class="e6ed l">已阅人员：</span>
			<div id="inReadUserNames" class="l" style="word-wrap:break-word;width:85%;"></div>
		</div>
		<!-- 未阅人员 -->
		<div class="p_t10 cl">
			<span class="e6ed l">未阅人员：</span>
			<div id="toReadUserNames" class="l" style="word-wrap:break-word;width:85%;"></div>
		</div>
		<div class="cl" style="padding-top:1px;">
		<table class="layui-table admin-table">
			<colgroup>
				<col width="6%">
				<col width="8%">
				<col width="10%">
				<col width="16%">
				<col width="60%">
				<col>
			</colgroup>
			<thead>
				<tr>
					<th>序号</th>
					<th>操作人</th>
					<th>部门</th>
					<th>时间</th>
					<th>意见</th>
				</tr>
			</thead>
			<tbody id="paging4-data">
				<script id="paging4-script" type="text/html">
					{{each records value index}}
						<tr>
							<td>{{(current-1)*size+index+1}}</td>
							<td>{{value.operationName}}</td>
							<td>{{value.deptName}}</td>
							<td>{{value.readTimeStr}}</td>
							<td >{{value.readOpinion}}</td>
						</tr>
					{{/each}}
				</script>
			</tbody>
	 	</table>
		</div>
		<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
			<div id="paging4-footer" class="page" style="background-color: white; text-align: center;"></div>
		</div>
	</div>
	<script type="text/javascript" src="../../web/plugins/layui2/layui.js"></script>
	<script type="text/javascript" src="../../web/plugins/layui/lay/modules/laypage.js"></script>
	<script type="text/javascript" src="../../web/js/template-web.js"></script>
	<script type="text/javascript" src="../../web/js/jquery.js"></script>
	<script type="text/javascript" src="../../web/js/tool_upload.js"></script>
    <script type="text/javascript" src="../../web/js/jquery.ztree.all.min.js"></script>
	<script type="text/javascript" src="../../web/js/laydate/laydate.js"></script>
	<script type="text/javascript" charset="utf-8" src="../../web/js/readReceipt.js"></script>
	<script type="text/javascript" charset="utf-8" src="../../web/js/multsel.js"></script>
	<script>
	   var paretning="false"//收阅文件 从在线消息进入 最后确定 标识 
		//定义layui
		 var _csrf = $("#_csrf").val();
		var pform;		  
		layui.use(['form','element'], function() {
			pform = layui.form;
			loadData();		
			readReceipt.opinionList();
			 //收文登记提交
	        pform.on('submit(form-regsub-submit)', function(data) {
	            readReceipt.checkNextTaskInfo();
	            readReceipt.getNextTaskInfo();
	            readReceipt.completeTask();	  	           
	            submit(); 
	        });
	        //池主任审批 保存
	        pform.on('submit(form-director-save)', function(data) {

	            var tr = $("#objList").find("tr");
	            $("#readObjDiv").empty();
	            var str = "";
	            var i = 0;
	            var isCheckAllUser = $("#all:checked").length;
	            $("#isCheckAllUser").val(isCheckAllUser);
				$(tr).each(function(index){
				    var td = $(this).find("td").eq(1);
	                var readUserNames = td.find("#readUserNames"+index).next().val() == '' ? td.find("#orgn-full-name"+index).val() : td.find("#readUserNames"+index).next().val();//td.find("#readUserNames"+index).text();
	                var readUserIds = td.find("#readUserIds"+index).val();
	                var dictCode = td.find("#dictCode"+index).val();
	                var dictName = td.find("#dictName"+index).val();
					if(readUserIds != ''){
	                    str += '<input type="hidden" name="readObjectList['+i+'].readUserIds" value="'+readUserIds+'" />';
	                    str += '<input type="hidden" name="readObjectList['+i+'].readUserNames" value="'+readUserNames+'" />';
	                    if(index == 0 || index == 1){
	                        str += '<input type="hidden" name="readObjectList['+i+'].objectId" value="'+(index+1)+'" />';
						}else{
	                        str += '<input type="hidden" name="readObjectList['+i+'].objectId" value="'+dictCode+'" />';
	                    }
	                    str += '<input type="hidden" name="readObjectList['+i+'].objectName" value="'+dictName+'" />';
	                    i++;
	                }
				});
	            if(isCheckAllUser > 0){
					var dictCode = $("#dictCode").val();
					var dictName = $("#dictName").val();
	                str += '<input type="hidden" name="readObjectList['+i+'].readUserIds" value="\'+dictCode+\'" />';
	                str += '<input type="hidden" name="readObjectList['+i+'].readUserNames" value="\'+dictCode+\'" />';

					str += '<input type="hidden" name="readObjectList['+i+'].objectId" value="'+dictCode+'" />';

	                str += '<input type="hidden" name="readObjectList['+i+'].objectName" value="'+dictName+'" />';
	            }
	            $("#readObjDiv").append(str);
	            tool.post("/ioa/ioaReceiveFile/directorAudit", $("#director-object-form").serialize(),postCallBackDirectorInfo, false);

	            return false;
	        });

	        //池主任审批提交
	        pform.on('submit(form-director-sub)', function(data) {
	            var tr = $("#objList").find("tr");
	            $("#readObjDiv").empty();
	            var str = "";
	            var i = 0;
	            var isCheckAllUser = $("#all:checked").length;
	            $("#isCheckAllUser").val(isCheckAllUser);
	            $(tr).each(function(index){
	                var td = $(this).find("td").eq(1);
	                var readUserNames = td.find("#readUserNames"+index).next().val() == '' ? td.find("#orgn-full-name"+index).val() : td.find("#readUserNames"+index).next().val();//td.find("#readUserNames"+index).text();
	                var readUserIds = td.find("#readUserIds"+index).val();
	                var dictCode = td.find("#dictCode"+index).val();
	                var dictName = td.find("#dictName"+index).val();
	                if(readUserIds != ''){
	                    str += '<input type="hidden" name="readObjectList['+i+'].readUserIds" value="'+readUserIds+'" />';
	                    str += '<input type="hidden" name="readObjectList['+i+'].readUserNames" value="'+readUserNames+'" />';
	                    if(index == 0 || index == 1){
	                        str += '<input type="hidden" name="readObjectList['+i+'].objectId" value="'+(index+1)+'" />';
	                    }else{
	                        str += '<input type="hidden" name="readObjectList['+i+'].objectId" value="'+dictCode+'" />';
	                    }
	                    str += '<input type="hidden" name="readObjectList['+i+'].objectName" value="'+dictName+'" />';
	                    i++;
	                }
	            });
	            if(isCheckAllUser > 0){
	                var dictCode = $("#dictCode").val();
	                var dictName = $("#dictName").val();
	                str += '<input type="hidden" name="readObjectList['+i+'].readUserIds" value="" />';
	                str += '<input type="hidden" name="readObjectList['+i+'].readUserNames" value="" />';

	                str += '<input type="hidden" name="readObjectList['+i+'].objectId" value="0" />';

	                str += '<input type="hidden" name="readObjectList['+i+'].objectName" value="'+dictName+'" />';
	            }
	            $("#readObjDiv").append(str);
	            tool.post("/ioa/ioaReceiveFile/directorAudit", $("#director-object-form").serialize(),function (data) {
	                readReceipt.checkNextTaskInfo();
	                readReceipt.getNextTaskInfo();
	                readReceipt.completeTask();
	                submit();
	            }, false);
	            return false;
	        });
	        var arr_name=[];
	        var arr_id=[];   
	        //监听单级人员复选框
	        pform.on('checkbox(human-checksign)', function(data) {
	            var userId = $(this).attr("uId");
	            var userName = $(this).attr("uName");
	            if(data.elem.checked){
	            	treeArr.push({id:userId,name:userName,userId:userId,userName:userName})
	            	/* console.log(treeArr) */
	            	 //数组去重
		   			 var res = [];
		   			 var json = {};
		   			 for(var i = 0; i < treeArr.length; i++){
		   			  if(!json[treeArr[i].userId]){
		   			   res.push(treeArr[i]);
		   			   json[treeArr[i].userId] = 1;
		   			  }
		   			 }
		   			treeArr=res;
	            }else{
			    	 for(var i=0;i<treeArr.length;i++){
			    		 if(treeArr[i].name==userName){
			    			 treeArr.splice(i,1)
			    		 }
			    	 }
	            }     
	            var str="",namestr="",fullname="";
	        	var divs="";
	     		$.each(treeArr,function(index,value){ 
	     			str+=value.userId+";"
	     			namestr+=value.userName+";"
	     			fullname+=value.name+";";
	     			divs+='<div class="layui-input-inline" style="position: relative;float:none;width:auto;">'+
	     			 '<i class="layui-icon" onclick="removeElement(this)" strid="'+value.userId+'" namestr="'+value.userName+'"  fullname="'+value.name+'"   style="cursor: default; font-size:16px; color: #d9d9d9;position: absolute;right: -8px;z-index: 10; ">&#x1007;</i>'+  
	     	    	 '<a class="layui-btn" style="cursor: pointer;color: black; background: none;height:26px;line-hieght:26px;padding-left:6px;padding-right:6px" >'+value.name+'</a>'+
	     	    	 '</div>'	    		
	     		})
	        	$("#win-director-object").find("#"+changeName).empty();
				$("#win-director-object").find("#"+changeName).append(divs);
	            $("#win-director-object").find("#"+changeName).next().val(fullname);
	        	//id赋值
	            $("#"+changeId).val(str);
	        });
	        //待阅文件 提交
	        pform.on('submit(form-toread-submit)', function(data) {
	            readReceipt.checkNextTaskInfo();
	            readReceipt.getNextTaskInfo();
	            submit();
	            readReceipt.completeTask();
	        });
	        
	        //监听全选
	        pform.on('checkbox(human-check-all)', function(data) {
	        	var child = $(data.elem).parents('table').find('tbody input[type="checkbox"]');
				child.each(function(index, item) {
					item.checked = data.elem.checked; 
					
					var userId = $(item).attr("uid");
		            var userName = $(item).attr("uname");
		            
					if(data.elem.checked){
						treeArr.push({id:userId,name:userName,userId:userId,userName:userName})
						 //数组去重
			   			 var res = [];
			   			 var json = {};
			   			 for(var i = 0; i < treeArr.length; i++){
			   			  if(!json[treeArr[i].userId]){
			   			   res.push(treeArr[i]);
			   			   json[treeArr[i].userId] = 1;
			   			  }
			   			 }
			   			treeArr=res;
		            	var str="",namestr="",fullname="";
		            	var divs="";
		         		$.each(treeArr,function(index,value){ 
		         			str+=value.userId+";"
		         			namestr+=value.userName+";"
		         			fullname+=value.name+";";
		         			divs+='<div class="layui-input-inline" style="position: relative;float:none;width:auto;">'+
		         			 '<i class="layui-icon" onclick="removeElement(this)" strid="'+value.userId+'" namestr="'+value.userName+'"  fullname="'+value.name+'"   style="cursor: default; font-size:16px; color: #d9d9d9;position: absolute;right: -8px;z-index: 10; ">&#x1007;</i>'+  
		         	    	 '<a class="layui-btn" style="cursor: pointer;color: black; background: none;height:26px;line-hieght:26px;padding-left:6px;padding-right:6px" >'+value.name+'</a>'+
		         	    	 '</div>'	    		
		         		})
		            	$("#win-director-object").find("#"+changeName).empty();
						$("#win-director-object").find("#"+changeName).append(divs);
	                    $("#win-director-object").find("#"+changeName).next().val(fullname);
	                    $("#win-director-object").find("#"+changeName).next().val(fullname);
						//id赋值
		                $("#"+changeId).val(str); 
		
		            }else{
		            	 $("#win-director-object").find("#"+changeName).empty();
		            	 $("#"+changeId).val(""); 
		            }      

				});
				pform.render('checkbox');
		});
		});
		/* 提交弹窗 */
		function submit(){			
			var index = layer.open({
				title : '提交',
				maxmin : false,
				type : 1,
                shade: false,
				shadeClose: true,
                area: ['900px', '510px'],
				content : $('#win-submit-object')
			});
		}
		function render(){
	        layui.use('form', function() {
	            loadData();
	        })
	    }
	
		 //个人中心--通知-分页列表
		function loadData(){		
			var param = new Object();
			param.msgType=$('#city1').val();
			param.isRead=$('#city2').val();
			param.fullnames=$('#searchKey').val();			
			param.container = "paging";
			param.pageSize = 10;
			param.url = "/per/autMsgOnline/list";
			tool.loadpage(param);
		}
		multselInit();
		 //个人中心--通知-删除
	    function showDelete(id){
	        layer.confirm('确定删除 ?', {
	            icon : 3,
	            title : '提示'
	        }, function() {
	            tool.deleteById("/per/autUsefulOpinion/delete", id);
	            layer.alert("删除成功", {
	                title : "操作提示",
	                icon : 1
	            }, function(index) {
	                layer.close(index);
	                render()
	            });
	        })
	    }
	    var indexMee;
	    //收文阅件详情
	    function detail(bizId,linkName) {
			if(linkName == "收文登记"){
				readReceipt.registerDetail(bizId);
			}else if(linkName == "办公室拟办意见"){
			    readReceipt.directorAuditDetail(bizId);
			}else if(linkName.indexOf("传阅")>-1){				
			    readReceipt.toReadDetail(bizId);
			}else{				
			    readReceipt.readDetail(bizId);
			}			
	    }
	    /* 日志弹窗 */
		function daily(){
            readReceipt.getAllTaskLogInfo();
		}
		//详情
		function showView(url,id){ 
			var myWaitWork = url.indexOf("openForm")>-1?"我的待办":""
			var param = new Object()
			param.msgId = id;
			param.callUrl=url;
			param._csrf = $("#_csrf").val()
			var isTrue=false;
			var isReceive="";			
			tool.post("/aut/autDataStatistics/minus", param, function(data){
				
				if (data.code == 0) {	
					url="";
					isReceive=data.object.taskName;
					url=data.object.toUrl;
				} else {
					tool.success(data.message);	
					loadData();
					isTrue=true;
				}				
			}, false); 
			if(isTrue){
				return false;
			}
			if(url.indexOf("ioaReceiveFile")>-1  ){	
				if(url.indexOf("signInTime")>-1 ){	
				var n=url.split("&signInTime");
				var m=n[0].split("ioaReceiveFile,");
				if(m[1]!=null && m[1]!=""){
				    detail(m[1],isReceive);
				}	
				}
			}else{
			/* ///mai/maiReceiveBox/maiReceiveBoxPageDetailPage
			if(url.indexOf("openForm")>-1){
				param = new Object()
				tool.post("/aut/autDataStatistics/minus", param, function(data){}, false); 
			} */			
			 var ins={
				  type: 2,
				  title: myWaitWork,
				  shade: 0.8, 
				  shadeClose: true,
				  content: url,
				  cancel:function(){
					  if($(".layui-laypage-btn").length>0){
						   $(".layui-laypage-btn").trigger("click");
					   }else{
						   loadData();
					   }
					  
				  }
				}
			 if(myWaitWork.length<=0){
				 ins.closeBtn=0;
			  }
             indexMee= layer.open(ins);
        	
		    pform.render();
			layer.full(indexMee);
			}
		}		
		 
	    //批量删除
		  function deleteIds(){
			  if($(".moreInput:checked").length==0){
					tool.error('至少选中一个');
			  }else{
			  var str="";
			  $(".moreInput:checked").each(function(index,value){
				  str+=value.id+";";
			  })
			   //调批量删除接口 最后重新渲染列表 
			  layer.confirm('确定删除吗 ?', {
					icon : 3,
					title : '提示'
				}, function(index) {
					var retMsg = tool.deleteByIds("/per/autMsgOnline/deleteMsgList", str)
					if (retMsg.code == 0) {
						$("#paging_check-all").attr("checked",false);
						pform.render();
						tool.success(retMsg.message);
						layer.closeAll();
						loadData(); 
					} else {
						tool.error(retMsg.message);
					}
				});
			   
			  }
		  }
		//点击添加常用意见
			function click_font(obj){
				var a = $(obj).find('.sug').text();
				var b = $('#draw_sug').val();
				$('#draw_sug').val(b+a);
			}	
			function add_sug(){
				layer.confirm('确定加入常用意见？', {
					  btn: ['确定','取消'] //按钮
					}, function(){
					  readReceipt.addOpinion();
					}, function(){
					  
					});
			}
			
			var changeId="";
			var changeName="";
			var treeArr=[];   
			//人员选择树
			function personlSeclectOpen(index,tis,id,name){
				arr_id = [];
			    arr_name  = [];
			    treeArr=[];
			    /* console.log(treeArr) */

				changeId=id;
				changeName=name;
	            var td = $(tis).parent().prev();
			    if(index == 0 || index == 1){
	                var dictCode = td.find("#dictCode"+index).val();
	                var _csrf = $("#_csrf").val();
	                var pm = {
	                    dictCode:dictCode,
	                    _csrf:_csrf
	                };
	                tool.post("/ioa/ioaReceiveFile/memberList",pm,function(data){
	                    var memberlist={memberlist:data};
	                    $('#paging5-data').html(template("paging5-script", memberlist));
	                    pform.render();
	                    human(tis);
	                },false);
	                //再次点击时复选框勾选
	                if($("#"+changeId).val() != ""){
	                	
			    		arr_id = $("#"+changeId).val().split(";");
			    		
			    		/* console.log("id:"+arr_id); */
			    		for(var i=0;i<arr_id.length;i++){
			    			$(".human").each(function(index){
			    				if(arr_id[i] == $(this).attr("uId")){
			    					$(this).attr("checked",true)
				    			}
			    			});
			    		}
			    		pform.render();
			    		
			    	}else{
			    		$("#human-checkall").attr("checked",false);
			    		pform.render();
			    	}
	                
				}else{
	                var deptName = td.find("#dictName"+index).val();
	                var deptId = td.find("#dictCode"+index).val();
	                tool.treeDemo("win-personal-object",'treeDemo',"readUserIds"+index,"orgn-full-name"+index,"",false,"",deptId,'',name);
	            }
	      	}

		    /* 一级人员弹窗 */
		    function human(tis){
		    	var index = layer.open({
		            title : '人员',
		            maxmin : false,
		            type : 1,
		            area:["250px","400px"],
		            shadeClose: true,
		            content : $('#win-human-object')
		        });
		    }
		    //人员选择树
		    function personlSeclect(){
		        var deptId = $("#deptId").val();
		        var uId = $("#deptUserId").val();
		        tool.treeDemo("win-personal-object",'treeDemo',"n_receiverNameid","n_receiverName_","n_receiverName",false,"",deptId,"","",uId);
		    }
		   //计算文本域数字
		    function countnum(par) { 
		    	var min = 0; 
		    	if (par.value.length > min){ 
		    	var str = min + par.value.length; 
		    	document.getElementById("count").innerHTML = str.toString(); 
		    	}
		    }
		    //下载
		    function downLoads(path,resourceName){
		        resourceName = encodeURIComponent(encodeURIComponent(resourceName));
		        location.href = "/res/resResource/download?path="+ encodeURIComponent(path)+"&resourceName="+resourceName;
		    }
		    function agree(){
	            $("#form-jump-submit").attr("style","display:none");
	            $("#form-add-submit").removeAttr("style");
	            $(".agree").show();
	            $(".noagree").hide();
	            $(".yes").addClass("blue_border");
	            $(".no").removeClass("blue_border");
	        }
			function noagree(){
	            $("#form-add-submit").attr("style","display:none");
	            $("#form-jump-submit").removeAttr("style");
	            readReceipt.getPreTaskInfo();
			}
			//重置树
			function reset_tree(){
				var mytree = $.fn.zTree.getZTreeObj("treeDemo");
			    //打开弹窗前重置节点以及关闭展开状态，避免叠加
				/* $('.reset').val("");
				$('.reset1').html(""); */
				$("#"+changeId).val("");
				$("#"+changeName).html("");
				mytree.checkAllNodes(false)
			    mytree.expandAll(false);
			}
			
			//传阅情况及意见
			function batchidea(){
				var processInstanceId = $("#processInstanceId").val()
		        var pm = {
		            _csrf:_csrf,
		            processInstanceId : processInstanceId
		        };
		        /* console.log(processInstanceId) */
		        tool.post("/ioa/ioaReceiveReadUser/circulation",pm,function(data){
		            if(null != data){
		                $("#inReadUserNames").text(data.inReadNames);
		                $("#toReadUserNames").text(data.toReadNames);
		            }
		            var index = layer.open({
		                title : '传阅情况及意见',
		                maxmin : false,
		                type : 1,
		                shadeClose: true,
		                content : $('#win-batchidea-object')
		            });
		            loadReadUserData();
		            layer.full(index);
		        },false);
			}
			 function loadReadUserData() {
			    	var processInstanceId = $("#processInstanceId").val()
			        var param = new Object();
			        param.container = "paging4";
			        param.url = "/ioa/ioaReceiveReadUser/list";
			        param._csrf = $("#_csrf").val();
			        param.id = processInstanceId;
			        param.pageSize = 10;
			        tool.loadpage(param);
			    }
	</script>
</body>
</html>