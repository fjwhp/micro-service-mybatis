<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>外部会议管理</title>
<link rel="stylesheet" href="../../web/css/global.css" media="all">
<link rel="stylesheet" href="../../web/css/zTreeStyle.css" media="all">
<link rel="stylesheet" href="../../web/plugins/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="../../web/css/table.css" />
<link rel="stylesheet" href="/getCssStyle?css=static/web/plugins/layui2/css/layui.css" />
<link rel="stylesheet" href="/getCssStyle?css=static/web/plugins/layui/css/layui.css" media="all" />
<link rel="stylesheet" href="../../web/css/public.css" media="all">
<link rel="stylesheet" href="../../web/css/zhengls.css" /> 
</head>
<body> 
	<input type="hidden" name="${_csrf.parameterName}" id="${_csrf.parameterName}" value="${_csrf.token}" />
	<div class="layui-tab layui-tab-brief m_t0" lay-filter="docDemoTabBrief" style="margin-bottom:50px;">
		<ul class="layui-tab-title">
		    <li class="layui-this" id="tapone"><@a code="120301" href="javascript:void(0)" text="外部会议管理"/></li>
		    <li id="taptwo"><@a code="120302" href="javascript:void(0)" text="会议草稿箱"/></li>
		    <li id="tapthree"><@a code="120303" href="javascript:void(0)" text="新增外部会议"/></li>
		</ul>
		<div class="layui-tab-content">
		  	<div class="layui-tab-item layui-show content_sel" id="tapGoone">
		  		<div class="">
		  		<blockquote class="layui-elem-quote" style="padding:5px;text-align: right;">
					<form class="layui-form" action="">
						<div>
							<div class="layui-input-inline">
								<input type="text" name="searchKey" id="searchKey" lay-verify=""  maxlength="20"  placeholder="请输入议题、会议地址" autocomplete="off" class="layui-input"
									style="height: 30px; line-height: 30px; width: 220px;">
							</div>
							<span lay-submit=""><@a code="120304" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="loadData(1)" iclass="layui-icon"
								 icon="&#xe615;" text="查询"/></span>
							<span lay-submit=""><@a code="120305" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="search_h()" text="高级搜索"/></span>
						</div>
				<!-- 	    <div class="layui-input-inline">
						  	<span><a class="layui-btn layui-btn-small" onclick="onclick="showDeletes()"><i class="layui-icon">&#xe640;</i>删除</a></span>
						</div> -->
					</form>
				</blockquote>
					<form class="layui-form sear" action="" style="display:none;">
					<div>
						<!-- <div class="layui-input-inline m_r10" >
						 <span>议题</span>
						</div>
						<div class="layui-input-inline m_r20">
							<input type="text" class="inp_w120px" name=""  maxlength="50" id="meetingTitle-search" style="width:180px;" lay-verify="">
						</div>
						<div class="layui-input-inline m_r10">
						 <span>会议地址</span>
						</div>
						<div class="layui-input-inline m_r20">
							<input type="text" class="inp_w120px" name=""   maxlength="50" id="address-search" style="width:180px;">
						</div> -->
						<div class="layui-input-inline m_r10">
						 	<span>审核状态</span>
						</div>
						<div class="layui-input-inline m_r20">
					      		<select name="auditStatus" lay-verify="" style="width:150px;height:32px;" id="auditStatus-search">
							        <option value=""></option>
							        <option value="1">审核中</option>
							        <option value="2">审核失败</option>
							        <option value="3">审核通过</option>
					      		</select>
					   	</div>
					   	<div class="layui-input-inline m_r10">
						 	<span>会议情况</span>
						</div>
						<div class="layui-input-inline m_r20">
					      		<select name="meetingSituation" lay-verify="" style="width:150px;height:32px;" id="meetingSituation-search">
							        <option value=""></option>
									<option value="1">未完成</option>
									<option value="2">已完成</option>
							        <option value="3">已取消</option>
					      		</select>
					   	</div>
					   	<div class="layui-input-inline m_r10">
						 <span>会议时间</span>
						</div>
						<div class="layui-input-inline m_r20">
							 <input type="text" class="inp_date" name="" id="startTime-search"  readonly lay-verify="specailChar|textLength200">
						</div>
						<div class="layui-input-inline m_r10">
						 <span>至</span>
						</div>
						<div class="layui-input-inline m_r20">
							  <input type="text" class="inp_date" name="" id="endTime-search" readonly lay-verify="specailChar|textLength200">
						</div> 
						<span lay-submit=""><a class="layui-btn layui-btn-small" id="" onclick="loadData(2)" style="float:right;"><i class="layui-icon">&#xe615;</i>查询</a></span>
				   </div>
				   <!--  <div class="m_t10">
						
				    </div> -->
					</form>
<!-- 					<form class="layui-form m_t30" action="">
						  <a class="btn_blue m_r20" onclick="">起草外部会议</a>
					</form> -->
					<div class="layui-form">
						<table class="layui-table admin-table">
						    <colgroup>
								<col width="6%">
								<col width="22%">
								<col width="20%">
								<col width="12%">
								<col width="12%">
								<col width="10%">
								<col width="10%">
								<col width="8%">
							</colgroup>
							<thead>
								<tr>
									<th style="display: none;">用户ID</th>
									<th>序号</th>
									<th>会议议题</th>
									<th>会议地址</th>
									<th>开始时间</th>
									<th>结束时间</th>
									<th>审核情况</th>
									<th>会议情况</th>
									<th>创建人</th>
								</tr>
							</thead>
					<tbody id="paging-data">
					<script id="paging-script" type="text/html">
					{{each records value index}}
						<tr>
							<td style="display: none;">{{value.id}}</td>
							<td>{{(current-1)*size+index+1}}</td>
							<td class="table_link" onclick="detail('{{value.id}}','0')" style="cursor:pointer;" title="{{value.meetingTitle}}">{{value.meetingTitle}}</td>
							<td title="{{value.address}}">{{value.address}}</td>
							<td>{{value.beginDate}}</td>
							<td>{{value.endDate}}</td>
							<td>{{value.auditStatus}}</td>
							<td>{{value.meetingSituation}}</td>
							<td>{{value.createFullName}}</td>
						</tr>
					{{/each}}
					</script>
					</tbody>
					</table>
					</div>
					<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
						<div id="paging-footer" class="page" style="background-color: white; text-align: center;"></div>
					</div>
		  		</div>
		  	</div>
		    <div class="layui-tab-item content_sel" id="tapGotwo">
		    <!--  外部会议草稿箱-->
		    	<div class="">
		    	<blockquote class="layui-elem-quote" style="padding:5px;">
					<form class="layui-form" action="">
						<div style="float:right;">
							<div class="layui-input-inline m_r10">
							 <span>会议时间</span>
							</div>
							<div class="layui-input-inline m_r20">
								 <input type="text" class="inp_date" name="" readonly id="out-startTime-search" lay-verify="specailChar|textLength200">
							</div>
							<div class="layui-input-inline m_r10">
							 <span>至</span>
							</div>
							<div class="layui-input-inline m_r20">
								  <input type="text" class="inp_date" name="" readonly id="out-endTime-search" lay-verify="specailChar|textLength200">
							</div> 
							<div class="layui-input-inline">
								<input type="text" name="searchKey" id="searchKey_" maxlength="20" placeholder="请输入议题或会议地址" autocomplete="off" class="layui-input"
									style="height: 30px; line-height: 30px;">
							</div>
							<span lay-submit=""><@a code="120306" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="loadDraftData()" iclass="layui-icon"
								 icon="&#xe615;" text="查询"/></span>
						    <!-- <span><a class="layui-btn layui-btn-small" onclick="search_h()">高级搜索</a></span> -->
						</div> 
			    	    <div class="layui-input-inline">
							<span lay-submit=""><@a code="120307" href="javascript:void(0)" class="layui-btn layui-btn-small" id="" onclick="deleteBatchDraft()" iclass="layui-icon"
								 icon="&#xe640;" text="删除"/></span>			    	    
						</div> 
					</form>
				</blockquote>
					<!-- <form class="layui-form" action="">
					<div>
						<div class="layui-input-inline m_r10" >
						 <span>议题</span>
						</div>
						<div class="layui-input-inline m_r20">
							<input type="text" class="inp_w120px" name="" id="" style="width:180px;">
						</div>
						<div class="layui-input-inline m_r10" >
						 <span>会议地址</span>
						</div>
						<div class="layui-input-inline m_r20">
							<input type="text" class="inp_w120px" name="" id="" style="width:180px;">
						</div>
						<div class="layui-input-inline m_r10">
						 <span>会议时间</span>
						</div>
						<div class="layui-input-inline m_r20">
							 <input type="text" class="inp_date" name="" id="startTime1">
						</div>
						<div class="layui-input-inline m_r10">
						 <span>至</span>
						</div>
						<div class="layui-input-inline m_r20">
							  <input type="text" class="inp_date" name="" id="endTime1">
						</div> 
						<span><a class="btn_search_blue" id="" onclick="loadData()" style="float:right;">查询</a></span>
				    </div>
					</form>
					<form class="layui-form m_t30" action="">
						  <a class="btn_blue m_r20" onclick="">删除</a>
					</form> -->
					<div class="layui-form">
						<table class="layui-table admin-table">
						  <colgroup>
								<col width="4%">
								<col width="6%">
								<col width="24%">
								<col width="23%">
								<col width="12%">
								<col width="12%">
								<col width="8%">
								<col width="11%">
							</colgroup>
							<thead>
								<tr>
									<th style="width: 20px;"><input type="checkbox" lay-skin="primary" id="paging_check-all" lay-filter="paging_check-all"></th>
									<th style="display: none;">用户ID</th>
									<th>序号</th>
									<th>会议议题</th>
									<th>会议地址</th>
									<th>开始时间</th>
									<th>结束时间</th>
									<th>创建人</th>
									<th>操作</th>
								</tr>
							</thead>
					<tbody id="paging2-data">
					<script id="paging2-script" type="text/html">

					{{each records value index}}
						<tr>
							<td onclick="defalt_td(event)"><input type="checkbox"  class="check-id moreInput"  lay-skin="primary"   id="{{value.id}}"></td>
							<td style="display: none;">{{value.id}}</td>
							<td>{{(current-1)*size+index+1}}</td>
							<td class="table_link" onclick="detail('{{value.id}}','1')" style="cursor:pointer;" title="{{value.meetingTitle}}">{{value.meetingTitle}}</td>
							<td>{{value.address}}</td>
							<td>{{value.beginDate}}</td>
							<td>{{value.endDate}}</td>
							<td>{{value.createFullName}}</td>
							<td onclick="defalt_td(event)">
								<@a code="120308" href="javascript:void(0)" class="table_btn" id="show-edit" onclick="edit('{{value.id}}',this)" text="编辑"/>
								<@a code="120309" href="javascript:void(0)" class="table_btn" id="show-delete" onclick="showDelete('{{value.id}}',this)" text="删除"/>
							</td>
						</tr>
					{{/each}}
					</script>
					</tbody>
					</table>
					</div>
					<div class="admin-table-page" style="border-width: 0px; z-index: 0;">
						<div id="paging2-footer" class="page" style="background-color: white; text-align: center;"></div>
					</div>
		  		</div>
		    </div>
		    <div class="layui-tab-item" id="tapGothree">
			    <!-- 新建外部会议-->
				<div class="" id="win-add-object">
					<form class="layui-form layui-form-pane" id="add-object-form">
						<input type="hidden" name="${_csrf.parameterName}"  value="${_csrf.token}" />
						<!-- 附件 -->
						<div id="filealea_add">

						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">会议标题</label>
							<div class="layui-input-block">
								<input type="text" name="meetingTitle"  lay-verify="required|spactily" maxlength="50" autocomplete="off" placeholder="会议标题" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">主持人</label>
							<div class="layui-input-block">
								<input type="text" name="meetingHost"  lay-verify="required|spactily" maxlength="20" autocomplete="off" placeholder="主持人" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">联系人</label>
							<div class="layui-input-block">
								<input type="text" name="contacts"  lay-verify="required|spactily" maxlength="50" autocomplete="off" placeholder="联系人" class="layui-input">
							</div>
						</div>
					 	<div class="layui-form-item">
							<label class="layui-form-label">会议地址</label>
							<div class="layui-input-block">
								<input type="text" name="address"  lay-verify="required|spactily"  maxlength="100" autocomplete="off" placeholder="填写地址" class="layui-input">
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">参会人员</label>
							<div class="layui-input-block">
								<input type="hidden" style="width:81%;float:left;" name="partyMemeberNames" id="partyMemeberNames-add" lay-verify="" autocomplete="off" placeholder="参会人员" class="layui-input" readonly="readonly">
								<div type="text" style="width:81%;float:left;" name="partyMemeberNames-addDiv" id="partyMemeberNames-addDiv" lay-verify="" autocomplete="off" placeholder="公告对象" class="newgg reset1" readonly="readonly"></div>
								<input type="hidden" class="reset" id="partyMemebersId-add" name="partyMemebersId" value="">
								<a class="btn_blue2  btn_blue2one" style="float:right;">人员选择</a>
							</div>
						</div>
						<div class="layui-form-item layui-form-text">
							<label class="layui-form-label">外部出席单位/人员</label>
							<div class="layui-input-block">
								 <textarea name="attendances"  placeholder="请输入内容"   maxlength="1000" class="layui-textarea"></textarea>
							</div>
						</div>
						<div class="layui-form-item">
							<label class="layui-form-label">开始时间</label>
							<div class="layui-input-block">
								<input type="text" name="beginTime" id="startTime-add" lay-verify="required" readonly autocomplete="off" placeholder="会议开始时间" class="layui-input startTime">
							</div>
						</div> 
						<div class="layui-form-item">
							<label class="layui-form-label">结束时间</label>
							<div class="layui-input-block">
								<input type="text" name="endTime" id="endTime-add" lay-verify="required" readonly autocomplete="off" placeholder="会议结束时间" class="layui-input endTime">
							</div>
						</div>   
						<div class="layui-form-item layui-form-text">
							<label class="layui-form-label">会议内容</label>
							<div class="layui-input-block">
								 <textarea name="meetingContent" lay-verify="required"  placeholder="请输入内容"   maxlength="500" class="layui-textarea"></textarea>
							</div>
						</div> 
						<div class="layui-form-item">
						    <label class="layui-form-label">提醒方式</label>
						    <div class="layui-input-block">
								<input type="hidden" name="isWarnMsg"  id="isWarn-Msg" title="短信提醒" lay-skin="primary" value="" >
								<input type="hidden" name="isWarnMail" id="isWarn-Mail"title="邮件提醒" lay-skin="primary" value="">
								<input type="hidden" name="isWarnOnline" id="isWarn-Online" title="消息提醒" lay-skin="primary" value="">

								<input type="checkbox" lay-filter="isWarnMsg"    class="clearbox" name="isWarnMsg-add" title="短信提醒" lay-skin="primary" value="" >
								<input type="checkbox" lay-filter="isWarnMail"   class="clearbox" name="isWarnMail-add" title="邮件提醒" lay-skin="primary" value="">
								<input type="checkbox" lay-filter="isWarnOnline" class="clearbox" name="isWarnOnline-add" title="消息提醒" lay-skin="primary" value="">
						        <span style="    position: relative; top: 3px; color: #B5B5B5;">(系统将会在会议开始前一天的16:20再次提醒参会人员)</span>
						    </div>
						</div>
						<div class="layui-form-item" style="margin-bottom:60px">
							<label class="layui-form-label">上传附件</label>
							<div class="layui-input-block">
								<div class="layui-upload">
			 					   <div class="layui-upload-drag drag" id="test10" style="padding:5px">
										  <i class="layui-icon"></i>
										  <p>点击上传，或将文件拖拽到此处</p>
								   </div>
			 					   <a class="layui-btn bigin_upload" id="testListAction">
										<i class="layui-icon">&#xe62f;</i> 开始上传
						  		   </a> 
								   <div class="layui-upload-list">
								       <table class="layui-table">
									     
									      	<tbody id="demoList_add">
												<script   id="artt1"  type="text/html">
													{{each filelist value index}}
													<tr>
														<td>{{value.orgnlFileName}}</td>
														<td>{{value.fileSize}}kb</td>
														<td><span style="color: #5FB878;">上传成功</span></td>
														<td>
															<a style="color:#339bf1;" index="{{index}}" >删除</a>
														</td>
													</tr>
													{{/each}}
												</script>
											</tbody>
								       </table>
								   </div>
								</div> 
							</div>
						</div>
						<div class="btn_fixed">
							<div style="float: right;">
								<button class="layui-btn" lay-submit="" lay-filter="form-add-submit">
									<i class="fa fa-save"></i> 提交
								</button>
								<button class="layui-btn layui-btn-primary" lay-submit="" lay-filter="form-save-submit">
									<li class="fa fa-eraser"></li> 保存
								</button>
							</div>
						</div>
					</form>
				</div>
		    </div>
		</div>
	</div>  
	<!-- 会议详情 -->
	<div class="admin-main" style="display: none;z-index: 19940200;" id="win-detail-object">
		<div id="win-newsms-object">
			<form class="layui-form layui-form-pane" id="detail-object-form">
				<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
				<!-- <div class="mr_top10">
					<span class="e6ed" style="width:100px;">会议标题：</span>
					<span id="meetingTitle"></span>
			    </div> -->
			    <!-- 标题 -->
				<div class="" style="text-align: center;">
					 <span id="meetingTitle" style="font-size:16px;font-weight: bold;word-wrap:break-word"></span>
				</div>
				<!-- 会议内容 -->
               <!--  <div class="outindss" style="clear:both;" id="mailContent">
				  <p id="meetingContent" style="word-wrap: break-word;" class="heidf"></p>
				</div> -->
				
			    <div class="p_t10">
					<span class="e6ed" style="width:100px;">主持人：</span>
					<span id="meetingHost"></span>
			    </div>
			     <div class="p_t10">
					<span class="e6ed" style="width:100px;">联系人：</span>
					<span id="contacts"></span>
			    </div>
			    <!-- <div class="mr_top10">
					<span class="e6ed" style="width:100px;">会议室：</span>
					<span id="meetingRoomName"></span>
			    </div> -->
				<div class="p_t10">
					<span class="e6ed" style="width:100px;">会议地址：</span>
					<span id="address"></span>
			    </div>
			    <div class="p_t10">
					<span class="e6ed l" style="width:100px;">参会人员：</span>
					<!-- <span id="partyMemeberNames"></span> -->
					<div id="partyMemeberNames" class="l" style="word-wrap: break-word; width: 85%;margin-left: 4px;"></div>
			    </div>
			     <div class="p_t10 cl">
					<!-- <span class="e6ed" style="width:160px;">外部出席单位/人员：</span>
					<span id="attendances"></span> -->
					<span class="e6ed l" style="width:100px;">外部出席单位&nbsp;/&nbsp;人员：</span>
					<div id="attendances" class="l" style="word-wrap: break-word; width: 85%;margin-top: 19px;margin-left: 4px;"></div>
			    </div>
			     <div class="p_t10 cl">
					<span class="e6ed" style="width:100px;">会议时间：</span>
					<span id="beginTime"></span>
					<span class="e6ed m_r10" style="width:20px;">至</span>
					<span id="endTime"></span>
			    </div>
			   <!--  <div class="p_t10">
					<span class="e6ed" style="width:100px;">结束时间：</span>
					<span id="endTime"></span>
			    </div> -->
			    <!-- <div class="mr_top10">
					<span class="e6ed" style="width:100px;">会议内容：</span>
					<span id="meetingContent"></span>
			    </div> -->
			    <!-- 会议内容 -->
                <div class="outindss" style="clear:both;" id="mailContent">
				  <p id="meetingContent" style="word-wrap: break-word;" class="heidf line_h_26px"></p>
				</div>
			<!-- 	<div class="p_t10">
				    <span class="e6ed" style="width:100px;">提醒方式：</span>
				    <span id="isWarnMsg-add" style="display:none;display:inline-block">短信提醒;</span>
				      <span id="isWarnMail-add" style="display:none;display:inline-block">邮件提醒;</span>
				      <span id="isWarnOnline-add" style="display:none;display:inline-block">短信提醒;</span>
				    </span>
				</div> -->
		    	<div class="p_t10 cl" >
					<span  class="e6ed l" style="width: 100px;">附件：</span> 
				<div class="">
				      <table class="layui-table" style="width: 50%;margin-top: 0px;border: none;">
				         <colgroup>
						    <col width="60%">
						    <col width="20%">
						    <col width="20%">
						  </colgroup>
					      	<tbody id="demoList">
							<script   id="artt_detail"  type="text/html">
								{{each filelist value index}}
                                    <tr>
                   					   <td style="border:none"><span style="margin-right:20px;">{{value.orgnlFileName}}</span></td>
                                       <td style="border:none"><span style="margin-right:20px;">{{value.fileSize}}kb</span></td>
                   					   <td style="border:none"><a onclick="" style="color:#339bf1;cursor:pointer">下载</a></td>
                                    </tr>
	              				 {{/each}}
							</script>
							</tbody>
				       </table>
				    </div>
				   </div>
				   <div class="btn_fixed">
					<a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();"><i class="fa fa-backward"></i> 返回</a>
				   </div>
		    	</form>
			</div>
		</div>
	<!--外部会议编辑-->
	<div class="admin-main" id="win-edit-object" style="display: none;z-index: 19940200;">
		<form class="layui-form layui-form-pane" id="edit-object-form">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}" />
			<input type="hidden" name="id" id="id-edit" value="">
			<!-- 附件 -->
			<div id="filealea_edit">

			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">会议标题</label>
				<div class="layui-input-block">
					<input type="text" name="meetingTitle" id="meetingTitle-edit" lay-verify="required|spactily" maxlength="50" autocomplete="off" placeholder="会议标题" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">主持人</label>
				<div class="layui-input-block">
					<input type="text" name="meetingHost"  id="meetingHost-edit" lay-verify="required|spactily" maxlength="20" autocomplete="off" placeholder="主持人" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">联系人</label>
				<div class="layui-input-block">
					<input type="text" name="contacts"  id="contacts-edit"  lay-verify="required|spactily" maxlength="50" autocomplete="off" placeholder="联系人" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">会议地址</label>
				<div class="layui-input-block">
					<input type="text" name="address" id="address-edit" lay-verify="required|spactily" maxlength="100" autocomplete="off" placeholder="填写地址" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">参会人员</label>
				<div class="layui-input-block">
					<input type="hidden" style="width:81%;float:left;" name="partyMemeberNames" id="partyMemeberNames-edit" lay-verify="" autocomplete="off" placeholder="参会人员" class="layui-input" readonly="readonly">
					<div type="text" style="width:81%;float:left;" name="partyMemeberNames-editDiv" id="partyMemeberNames-editDiv" lay-verify="" autocomplete="off" placeholder="公告对象" class="newgg reset1" readonly="readonly"></div>
					<input type="hidden" class="reset" id="partyMemebersId-edit" name="partyMemebersId" value="">
					<a class="btn_blue2  btn_blue2two" style="float:right;" >人员选择</a>
				</div>
			</div>
			<div class="layui-form-item layui-form-text">
				<label class="layui-form-label">外部出席单位/人员</label>
				<div class="layui-input-block">
					<textarea name="attendances"  id="attendances-edit" placeholder="请输入内容"   maxlength="1000" class="layui-textarea"></textarea>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">开始时间</label>
				<div class="layui-input-block">
					<input type="text" name="beginTime" id="beginTime-edit" lay-verify="required" readonly autocomplete="off" placeholder="会议开始时间" class="layui-input startTime">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">结束时间</label>
				<div class="layui-input-block">
					<input type="text" name="endTime" id="endTime-edit" lay-verify="required" readonly autocomplete="off" placeholder="会议结束时间" class="layui-input endTime">
				</div>
			</div>
			<div class="layui-form-item layui-form-text">
				<label class="layui-form-label">会议内容</label>
				<div class="layui-input-block">
					<textarea name="meetingContent" lay-verify="required" id="meetingContent-edit"  placeholder="请输入内容"   maxlength="500" class="layui-textarea"></textarea>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">提醒方式</label>
				<div class="layui-input-block">
					<input type="hidden" name="isWarnMsg"  id="iswarn-msg-msg" title="短信提醒" lay-skin="primary" value="" >
					<input type="hidden" name="isWarnMail" id="isWarn-mail-msg"title="邮件提醒" lay-skin="primary" value="">
					<input type="hidden" name="isWarnOnline" id="isWarn-online-msg" title="消息提醒" lay-skin="primary" value="">

					<input type="checkbox" lay-filter="isWarnMsg" id="isWarnMsg-edit" title="短信提醒" lay-skin="primary" value="" >
					<input type="checkbox" lay-filter="isWarnMail" id="isWarnMail-edit" title="邮件提醒" lay-skin="primary" value="">
					<input type="checkbox" lay-filter="isWarnOnline" id="isWarnOnline-edit" title="消息提醒" lay-skin="primary" value="">
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:60px;">
				<label class="layui-form-label">上传附件</label>
				<div class="layui-input-block">
					<div class="layui-upload">
						<div class="layui-upload-drag drag" id="test11" style="padding:5px">
							<i class="layui-icon"></i>
							<p>点击上传，或将文件拖拽到此处</p>
						</div>
						<a class="layui-btn bigin_upload" id="testListAction_edit">
							<i class="layui-icon">&#xe62f;</i> 开始上传
						</a> 
						<div class="layui-upload-list">
							<table class="layui-table">
								<tbody id="demoList_edit">
								<script   id="artt_edit"  type="text/html">
									{{each filelist value index}}
									<tr>
										<td>{{value.orgnlFileName}}</td>
										<td>{{value.fileSize}}kb</td>
										<td><span style="color: #5FB878;">上传成功</span></td>
										<td>
											<a style="color:#339bf1;cursor:pointer" index="{{index}}"  onclick="aleafile('{{value.id}}',this,{{index}})">删除</a>
										</td>
									</tr>
									{{/each}}
								</script>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div class="btn_fixed">
			    <a href="javascript:void(0)" class="layui-btn layui-btn-primary" onclick="layer.closeAll();"><i class="fa fa-backward"></i> 返回</a>
				<div style="float: right;">
					<button class="layui-btn" lay-submit="" lay-filter="form-edit-submit">
						<i class="fa fa-save"></i> 提交
					</button>
					<button  class="layui-btn layui-btn-primary" lay-submit="" lay-filter="form-editsave-submit">
						<li class="fa fa-eraser"></li> 保存
					</button>
				</div>
			</div>
		</form>
	</div style="display: none;z-index: 19940200;">
	<!-- 人员选择树 -->
	<div style="display: none;z-index: 19940200;" id="win-personal-object">
		<div class="search_h">
			<input id="peopelSel" class="tree_search1 reset" type="text" value="" placeholder="搜索">
			<a class="layui-btn layui-btn-small" id="" onclick="searchNodes()"><i class="layui-icon">&#xe615;</i>搜索</a>
			<a class="layui-btn layui-btn-small layui-btn-primary" style="margin-left:2px;" type="reset" onclick="reset_tree()"><li class="fa fa-eraser"></li> 重置</a>
			<label type="text"  id="resultKey" class="form-control">  
                <div>  
                    <a id="clickUp" class="tree_up" onclick="clickUp()"><i class="layui-icon">&#xe619;</i></a>  
                    <a id="clickDown" class="tree_down" onclick="clickDown()"><i class="layui-icon">&#xe61a;</i></a>  
                </div>  
                <label id="number" class="tree_number"></label>  
            </label>  
        </div>
        <div class="tree_h">
        	<ul id="treeDemo" class="ztree treeDemo1" name="treeDemo" style="display:block"></ul>
        </div>
        <div class="sure_h">
		    <a class="layui-btn layui-btn-small sure_s"><li class="fa fa-save"></li> 确定</a>
		</div>
	</div>
	<script type="text/javascript" src="../../web/plugins/layui2/layui.js"></script>
	<script type="text/javascript" src="../../web/plugins/layui/lay/modules/laypage.js"></script>
	<script type="text/javascript" src="../../web/js/template-web.js"></script>
	<script type="text/javascript" src="../../web/js/jquery.js"></script>
    <script type="text/javascript" src="../../web/js/jquery.ztree.all.min.js"></script>
	<script type="text/javascript" src="../../web/js/laydate/laydate.js"></script>
	<script type="text/javascript" src="../../web/js/tool_upload.js"></script>
	<script>
		//时间控件
		
	 	tool.dateTime('#startTime-search','#endTime-search','YYYY-MM-DD',false);
	 	tool.timeset('#out-startTime-search','#out-endTime-search');
	 	tool.timeParse('#startTime-add');
	 	tool.timeParse('#endTime-add');
	 	//tool.dateTime('#startTime-add','#endTime-add',"YYYY-MM-DD hh:mm",true);
	 	tool.timeParse('#beginTime-edit');
	 	tool.timeParse('#endTime-edit');
        //tool.dateTime('#beginTime-edit','#endTime-edit',"YYYY-MM-DD hh:mm",true);
        tool.dateTime('#beginTime','#endTime',"YYYY-MM-DD hh:mm",true); 
		//定义layui
		var pform;
        var arr=[];//放路径
        var nameArr=[];//放本地文件名
        var isCommitted = false;//表单是否已经提交标识，默认为false
		layui.use(['form','element'], function() {
			var element=layui.element;
			 element.on('tab(docDemoTabBrief)', function(data){
    			 arr=[];
    			 nameArr=[];
    		  });
			pform = layui.form;
            pform.verify({
                //限制输入的长度为200
                textLength200 : function(value) {
                    if (value.length>200) {
                        return "长度不能超过200个字符";
                    }
                },
                //限制输入的长度为100
                textLength100 : function(value) {
                    if (value.length>100) {
                        return "长度不能超过100个字符";
                    }
                },
                //限制输入的长度为10
                textLength10 : function(value) {
                    if (value.length>10) {
                        return "长度不能超过10个字符";
                    }
                },
                //限制输入的长度为10
                numberLength10 : function(value) {
                    if (value.length>10) {
                        return "数字不能超过10位";
                    }
                },
                //限制不能输入特殊10
                specailChar:function (value) {
                    if (new RegExp("[':;' \"\",\\[\\]——|‘；<>《》`：”“']").test(value)) {
                        return '不能输入特殊字符';
                    }
                }
            });

            //监听新增内部会议提交
            pform.on('submit(form-add-submit)', function(data) {
            	var a=jy('add-object-form');
            	if(a==false){
            		return false;
            	}
                layer.confirm('确定提交吗 ?', {
                    icon: 3,
                    title: '提示'
                }, function (index) {
                	if(isCommitted == false){
                        isCommitted = true;
	                    $("#filealea_add").empty();
	                    var str = "";
	                    if (arr.length > 0) {
	                        for (var i = 0; i < arr.length; i++) {
	                        	str += '<input type="hidden" name="resResourceList['+i+'].id" value="'+arr[i].res.id+'" />';
	                        }
	                        $("#filealea_add").append(str);
	                    }
	                    tool.post("/mee/meeOutsideMeeting/add", $("#add-object-form").serialize(),postCallBackInfoAdd, false);
                   }
                });
				return false;
            });

            //监听新增内部会议保存
            pform.on('submit(form-save-submit)', function(data) {
            	var a=jy('add-object-form');
            	if(a==false){
            		return false;
            	}
                if(isCommitted == false){
                    isCommitted = true;
                    $("#filealea_add").empty();
                    var str = "";
                    if (arr.length > 0) {
                        for (var i = 0; i < arr.length; i++) {
                        	str += '<input type="hidden" name="resResourceList['+i+'].id" value="'+arr[i].res.id+'" />';
                        }
                        $("#filealea_add").append(str);
                    }
                    tool.post("/mee/meeOutsideMeetingDraft/add", $("#add-object-form").serialize(),postCallBackInfo, false);
                    return false;
                }
            });

            //监听复选框
            pform.on('checkbox(isWarnMsg)', function(data) {
                if(data.elem.checked){
                    $("#isWarn-Msg").val(1);
                    $("#iswarn-msg-msg").val(1);
                }else{
                    $("#isWarn-Msg").val(0);
                    $("#iswarn-msg-msg").val(0);
                }
                pform.render();
            });
            //监听复选框
            pform.on('checkbox(isWarnMail)', function(data) {
                if(data.elem.checked){
                    $("#isWarn-Mail").val(1);
                    $("#isWarn-mail-msg").val(1);
                }else{
                    $("#isWarn-Mail").val(0);
                    $("#isWarn-mail-msg").val(0);
                }
                pform.render();
            });
            //监听复选框
            pform.on('checkbox(isWarnOnline)', function(data) {
                if(data.elem.checked){
                    $("#isWarn-Online").val(1);
                    $("#isWarn-online-msg").val(1);
                }else{
                    $("#isWarn-Online").val(0);
                    $("#isWarn-online-msg").val(0);
                }
                pform.render();
            });
            //监听编辑内部会议提交
            pform.on('submit(form-edit-submit)', function(data) {
            	var a=jy('edit-object-form');
            	if(a==false){
            		return false;
            	}
            	layer.confirm('确定提交吗 ?', {
                    icon: 3,
                    title: '提示'
               },function(index){
            	if(isCommitted == false){
                   isCommitted = true;
				$("#filealea_edit").empty();
				$("#edit-object-form").find("#id-edit").val();
				var str = "";
				if (arr.length > 0) {
					for (var i = 0; i < arr.length; i++) {
						str += '<input type="hidden" name="resResourceList['+i+'].id" value="'+arr[i].res.id+'" />';
					}
					$("#filealea_edit").append(str);
				}
				tool.post("/mee/meeOutsideMeeting/add", $("#edit-object-form").serialize(),postCallBackInfoAdd, false);
             }
            });
			 return false;

            });
            //监听编辑内部会议保存
            pform.on('submit(form-editsave-submit)', function(data) {
            	var a=jy('edit-object-form');
            	if(a==false){
            		return false;
            	}
            	if(isCommitted == false){
                    isCommitted = true;
                $("#filealea_edit").empty();
                var str = "";
                if (arr.length > 0) {
                    for (var i = 0; i < arr.length; i++) {
                    	str += '<input type="hidden" name="resResourceList['+i+'].id" value="'+arr[i].res.id+'" />';
                    }
                    $("#filealea_edit").append(str);
                }
                tool.post("/mee/meeOutsideMeetingDraft/update", $("#edit-object-form").serialize(),postCallBackInfo, false);
              }
                return false;

            });
			loadData();
			loadDraftData();
        });
		  //校验
		function jy(father){
			/* 参会人员必填--填则校验 */
			var userMail =$("#"+father).find(".newgg").text();
		    if(userMail==""||userMail==undefined){
		       tool.error('参会人员不能为空');
			   return false;
			} 
		    
		     //开始时间 结束时间对比校验
		     var start=Date.parse($("#"+father).find('.startTime').val());
	    	 var end =Date.parse($("#"+father).find(".endTime").val());
	    	 if(end<=start){
	    		 tool.error('结束时间要大于开始时间');
	    		 return false;
	    	 }else{
	    		 var todayStart =  $("#"+father).find('.startTime').val();
	    		 var todayEnd =  $("#"+father).find('.endTime').val();
	    		 todayStart=todayStart.substr(0,todayStart.length-6);
	    		 todayEnd=todayEnd.substr(0,todayEnd.length-6);
	    		 if(todayStart!=todayEnd){
	    			 tool.error("只能选择当天的时间开会");
	    			 return false;
	    		 }
	    	 }
		    
	   }
          //提交回调 
          function postCallBackInfoAdd(retMsg){
        	  isCommitted = false; 
              if (retMsg.code == 0) {
                  //提交后 再情况存放文件的数组 避免重复提交
                      $("#tapone").attr("class","layui-this");
                      $("#taptwo").attr("class","");
                      $("#tapthree").attr("class","");
                      $("#tapGoone").addClass("layui-show");
                      $("#tapGotwo").removeClass("layui-show");
                      $("#tapGothree").removeClass("layui-show");
                      clearform();
                      layer.closeAll();
                      loadData();
                      loadDraftData();
                      openForm(retMsg);
              } else {
                  tool.error(retMsg.message);
              }
          }
           //跳转到待办
          function openForm(data1) {
      		var data = data1.object;
      		var id = data.id;
      		var processName = data.processName;
      		var bpmnId = data.bpmnId;
      		var taskDefKey = data.taskDefKey;
      		var businessKey = data.businessKey;
      		var signInTime = data.signInTime
      		var index = layer.open({
      			title : processName,
      			maxmin : false,
      			type : 2,
      			content : '../../act/modeler/openForm.html?id='+bpmnId+'&activityId='+id+'&taskId='+taskDefKey+'&businessKey='+businessKey+'&signInTime='+signInTime+'&isWait=1'+'&isIndexLog=0',
      			cancel: function(){ 
      			    //右上角关闭回调
      			    layer.closeAll();
      			    //return false 开启该代码可禁止点击该按钮关闭
      			  },
      			success: function(layero, index){
      				//var body = layer.getChildFrame('body', index);
      				var iframeWin = window[layero.find('iframe')[0]['name']]; //得到iframe页的窗口对象，执行iframe页的方法：iframeWin.method();
      				iframeWin.$("#sub").trigger("click")
      			}
      		});
      		pform.render();
      		layer.full(index);
      	}
           //新增后清空内容函数
             function clearform(){
            	 $('#partyMemebersId-add').val("");
     			$('#partyMemeberNames-add').val("");
     			$('#personChargeId-edit').val("");
     			$('#personCharge-edit').val("");
     			$('#partyMemeberNames-addDiv').text("");
     			$('#partyMemeberNames-editDiv').text("");
          	  arr=[];
   			  nameArr=[];
          	  $("#add-object-form").find(".layui-input").val("");
          	  $("#add-object-form").find(".layui-textarea").val("");
          	  $("#add-object-form").find(".clearbox").attr("checked",false);
          	  $("#add-object-form").find("#filealea_add").empty();
          	  $("#add-object-form").find("#demoList_add").find("tr").remove();
          	  pform.render();
          	 }
           
             //保存回调
             function postCallBackInfo(retMsg){
            	 isCommitted = false; 
                 if (retMsg.code == 0) {
                     //提交后 再情况存放文件的数组 避免重复提交
                     layer.alert(retMsg.message, {
                         title : "操作提示",
                         icon : 1,
                         closeBtn:0
                     }, function(index) {
                     	 $("#tapone").attr("class","");
                         $("#taptwo").attr("class","layui-this");
                         $("#tapthree").attr("class","");
                         $("#tapGoone").removeClass("layui-show");
                         $("#tapGotwo").addClass("layui-show");
                         $("#tapGothree").removeClass("layui-show");
                     	 clearform()
                         layer.closeAll();
                     	var laypageBtn=$(pageBtn).parents(".admin-table").parent().next().find(".layui-laypage-btn");
                    	if(laypageBtn.length>0){
                    		laypageBtn.trigger("click");
                    	}else{
                    		loadDraftData();
                    	}
                     });
                 } else {
                     tool.error(retMsg.message);
                 }
             }
	

        //外部会议列表
        function loadData(type) {
            var param = new Object();
            param.container = "paging";
            param.url = "/mee/meeOutsideMeeting/list";
            param._csrf = $("#_csrf").val();
            param.pageSize = 10;
            if(type==1){
            	param.searchKey = $("#searchKey").val();
            }else{
            	param.searchKey = $("#searchKey").val();
                //param.meetingTitle = $("#meetingTitle-search").val();
                //param.address = $("#address-search").val();
                param.auditStatus = $("#auditStatus-search").val();
             //  param.meetingHost = $("#meetingHost-search").val();
                param.meetingSituation = $("#meetingSituation-search").val();
                param.startDate = $("#startTime-search").val();
                param.endDate = $("#endTime-search").val();           	
            }
            tool.loadpage(param);
        }

        //外部会议草稿列表
        function loadDraftData() {
            var param = new Object();
            param.container = "paging2";
            param.url = "/mee/meeOutsideMeetingDraft/list";
            param._csrf = $("#_csrf").val();
            param.pageSize = 10;
            param.meetingTitle = $("#searchKey_").val();
            param.startDate = $("#out-startTime-search").val();
            param.endDate = $("#out-endTime-search").val();
        //    param.address = $("#address-draft-search").val();
            tool.loadpage(param);
        }
        
        
        $(".btn_blue2one").click(function(){
        	tool.treeDemo("win-personal-object","treeDemo","partyMemebersId-add","partyMemeberNames-add","partyMemeberNames-addDiv");
        	$("#number").html("");
        })
        $(".btn_blue2two").click(function(){
        	tool.treeDemo("win-personal-object","treeDemo","partyMemebersId-edit","partyMemeberNames-edit","partyMemeberNames-editDiv");
        	$("#number").html("");
        })

    
            //用按钮查询节点  
       /*  function searchNodes(){  
            var mytree = $.fn.zTree.getZTreeObj("treeDemo");  
            var keywords=$("#peopelSel").val();  
            var nodes = mytree.getNodesByParamFuzzy("name", keywords, null);  
            if (nodes.length>0) {  
                mytree.selectNode(nodes[0]);  
            }  
        }  */ 
      //重置树
		function reset_tree(){
			var mytree = $.fn.zTree.getZTreeObj("treeDemo");
		    //打开弹窗前重置节点以及关闭展开状态，避免叠加
			$('#partyMemebersId-add').val("");
			$('#partyMemeberNames-add').val("");
			$('#personChargeId-edit').val("");
			$('#personCharge-edit').val("");
			$('#partyMemeberNames-addDiv').text("");
			$('#partyMemeberNames-editDiv').text("");
			$('.reset').val("");
			$("#number").html("");
			mytree.checkAllNodes(false)
		    mytree.expandAll(false);
		}
     
        //新增上传
        tool.fileUpload("demoList_edit","test11","/res/file/upload","testListAction_edit","MEE_INSIDE_MEETING_DRAFT");
        tool.fileUpload("demoList_add","test10","/res/file/upload","testListAction","MEE_OUTSIDE_MEETING");
       /*  var fileData = tool.getfiletiao('../../util/utilController/getAllowType') //调取后台文件格式 大小数据
        function clickfleupload(attchListSelector,dragSelector,startUploadSelector){
            layui.use('upload', function(){
                var upload = layui.upload;
                //多文件列表示例
                var demoListView = $('#'+attchListSelector)
                    ,uploadListIns = upload.render({
                    elem: '#'+dragSelector
                    ,url: '/res/resAttachment/upload'
                    ,accept: 'file'//接收文件
                    ,exts:fileData.allowType//接收文件后缀
                    ,method: 'post'
                    ,size:fileData.limitSize   //文件大小  kb
                    ,data:{_csrf:$("#_csrf").val(),allowType:fileData.allowType,limitSize:fileData.limitSize}//上传的参数
                    ,multiple: true//是否多文件上传
                    ,auto: true//设置是否自动上传(true)   false需要指定一个bindAction按钮来点击上传
                   // ,bindAction: '#'+startUploadSelector
                    ,before: function(obj){ //选中玩文件调用
                        var files = obj.pushFile(); //将每次选择的文件追加到文件队列
                        //读取本地文件
                        obj.preview(function(index, file, result){
                            nameArr.push({fileName:file.name,index:index,fileSize:parseInt(file.size/1014)})
                            var tr = $(['<tr id="upload-'+ index +'">'
                                ,'<td>'+ file.name +'</td>'
                                ,'<td>'+ (file.size/1014).toFixed(1) +'kb</td>'
                                ,'<td>等待上传</td>'
                                ,'<td>'
                                ,'<a class="demo-delete" style="color:#33a1ff;cursor:pointer;" index="'+index+'">删除</a>'
                                ,'</td>'
                                ,'</tr>'].join(''));


                            //单个重传
                            tr.find('.demo-reload').on('click', function(){
                                obj.upload(index, file);
                                return false;
                            });
                            //删除
                            tr.find('.demo-delete').on('click', function(){
                                var index = $(this).attr("index");
                                for(var i=0;i<nameArr.length;i++){
                                    if(nameArr[i].index==index){
                                        nameArr.splice(i,1)
                                    }
                                }
                                for(var i=0;i<arr.length;i++){
                                    if(arr[i].index==index){
                                        arr.splice(i,1)
                                    }
                                }
                                delete files[index]; //删除对应的文件
                                tr.remove();
                                return false;
                            });
                            //上传成功的 要删除对应的文件
                            $("#"+startUploadSelector).on("click",function(){
                                delete files[index];
                            })
                             delete files[index];
                            demoListView.append(tr);
                        });
                    }
                    ,done: function(res, index, upload){//开始上传到接口调用
                    	console.log(res)
                        if(res.code!=0){
                            tool.error(res.message)
                        }
                        //res 后台返回给前台的数据
                        var item = this.item;
                        if(res.code==0){ //上传成功c
                            arr.push({res:res.object[0],index:index});
                        console.log(arr)
                            var tr = demoListView.find('tr#upload-'+ index)
                                ,tds = tr.children();
                            tds.eq(2).html('<span style="color: #5FB878;">上传成功</span>');
                            // tds.eq(3).html('')
                            // delete files[index]; //删除文件队列已经上传成功的文件
                            return;
                        }
                        this.error(index, upload);
                    }
                    ,error: function(index, upload){
                        //如果上传失败 删除源文件名数组中的这项目
                        for(var i=0;i<nameArr.length;i++){
                            if(nameArr[i].index==index){
                                nameArr.splice(i,1);
                            }
                        }
                        var tr = demoListView.find('tr#upload-'+ index)
                            ,tds = tr.children();
                        tds.eq(2).html('<span style="color: #FF5722;">上传失败</span>');
                        tds.eq(3).find('.demo-reload').removeClass('layui-hide'); //显示重传
                    }
                });
            });
        } */

        //删除详情里面的附件
        function aleafile(id,myself,index){
            layer.confirm('确定删除吗 ?', {
                icon: 3,
                title: '提示'
            }, function (index) {
                var retMsg = tool.deleteById("/res/resResource/delete", id);
                if (retMsg.code == 0) {
                    tool.success(retMsg.message);
                    $(myself).parent().parent().remove();
                    for(var i=0;i<arr.length;i++){
                        if(arr[i].index==index){
                            arr.splice(i,1)
                        }
                    }
                    for(var i=0;i<nameArr.length;i++){
                        if(nameArr[i].index==index){
                            nameArr.splice(i,1)
                        }
                    }
                } else {
                    tool.error(retMsg.message);
                }
            });
        }


        //外部会议详情
        var indexMee;
        function detail(id,isDraft) {
        	indexMee= layer.open({
				  type: 2,
				  title:'',
				  closeBtn:0,
				  shade: 0.8, 
				  shadeClose: true,
				  content: 'meeOutsideManagePageDetail.html?id='+id+'&isDraft='+isDraft
				});
			    pform.render();
				layer.full(indexMee);
        }
        var pageBtn;
        //外部会议编辑
        function edit(id,myself) {
        	pageBtn=myself;
            var object =  tool.getById("/mee/meeOutsideMeetingDraft/getById", id);
            var fileBack=object.resResourceList;
            var filelist={filelist:fileBack};
            $('#demoList_edit').html(template("artt_edit", filelist));
            
            //文件信息回填
			var fileBack=object.resResourceList;
		/* 	 if(fileBack!=null){
			 for(var i=0;i<fileBack.length;i++){
				 arr.push({res:fileBack[i].attachPath,index:i})
                 nameArr.push({fileName:fileBack[i].attachName,index:i,fileSize:fileBack[i].attachSize})
			 }
			}  */
            
            $("#partyMemeberNames-editDiv").text(object.partyMemeberNames)
            for ( var key in object) {
                $("#edit-object-form").find("#" + key + "-edit").val(
                    object[key]);
                if(key == 'isWarnMsg'){
                    var isWarnMsg = $("#edit-object-form").find("input[id='isWarnMsg-edit']");
                    if(isWarnMsg.length>0){
                        if(object[key] == '1'){
                            $(isWarnMsg).prop("checked",true);
                        }else{
                        	$(isWarnMsg).prop("checked",false);
                        }
                    }
                    $("#iswarn-msg-msg").val(object[key]);
                }

                if(key == 'isWarnMail'){
                    var isWarnMail = $("#edit-object-form").find("input[id='isWarnMail-edit']");
                    if(isWarnMail.length>0){
                        if(object[key] == '1'){
                            $(isWarnMail).prop("checked",true);
                        }else{
                        	$(isWarnMail).prop("checked",false);
                        }
                    }
                    $("#isWarn-mail-msg").val(object[key]);;
                }

                if(key == 'isWarnOnline'){
                    var isWarnOnline = $("#edit-object-form").find("input[id='isWarnOnline-edit']");
                    if(isWarnOnline.length > 0){
                        if(object[key] == '1'){
                            $(isWarnOnline).prop("checked",true);
                        }else{
                        	$(isWarnOnline).prop("checked",false);
                        }
                    }
                    $("#isWarn-online-msg").val(object[key]);;
                }

                if(key == 'beginTime'){
                    var begTime = object[key].substr(0,16);
                    $("#beginTime-edit").val(begTime);
                }
                if(key == 'endTime'){
                    var endTime = object[key].substr(0,16);
                    $("#endTime-edit").val(endTime);
                }
            }
            var index = layer.open({
                title : '外部会议管理编辑',
                maxmin : false,
                type : 1,
                content : $('#win-edit-object')
            });
            pform.render();
            layer.full(index);
        }

        //删除单个
        function showDelete(id,myself) {
        	pageBtn = myself;
            layer.confirm('确定并删除?', {
                icon : 3,
                title : '提示'
            }, function(index) {
                var retMsg = tool.deleteByIds("/mee/meeOutsideMeetingDraft/delete", id)
                if (retMsg.code == 0) {
                	var laypageBtn=$(pageBtn).parents(".admin-table").parent().next().find(".layui-laypage-btn");
    	        	if(laypageBtn.length>0){
    	        		laypageBtn.trigger("click");
    	        	}else{
    	        		loadDraftData();
    	        	}
                    tool.success(retMsg.message);
                    layer.closeAll();
                } else {
                    tool.error(retMsg.message);
                }
            });
        }

        //批量删除公共信息草稿
        function deleteBatchDraft() {
            if ($(".moreInput:checked").length == 0) {
                tool.error('至少选中一个');
            } else {
                var str = "";
                $(".moreInput:checked").each(function (index, value) {
                    str += value.id + ";";
                })
                //调批量删除接口 最后重新渲染列表

                layer.confirm('确定删除吗 ?', {
                    icon: 3,
                    title: '提示'
                }, function (index) {
                    var retMsg = tool.deleteByIds("/mee/meeOutsideMeetingDraft/delete", str)
                    if (retMsg.code == 0) {
                    	$("#paging_check-all").attr("checked",false);
                    	pform.render();
                        tool.success(retMsg.message);
                        layer.closeAll();
                        loadDraftData();
                    } else {
                        tool.error(retMsg.message);
                    }
                });
            }
        }

  
        /* 高级搜索 */
		function search_h(){
			$(".sear").toggle();
		}

        //阻止maopao
        function defalt_td(event){
            event.cancelBubble=true;
        }
	</script>
</body>
</html>
